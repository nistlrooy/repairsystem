<?php

namespace App\RepairBundle\Entity;

use Doctrine\ORM\EntityRepository;


/**
 * RepairFormRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class RepairFormRepository extends EntityRepository
{
    public function getRepairForms($createrId,$conditionId)
    {
        $query = $this->getEntityManager()->createQuery(
            'SELECT r FROM RepairBundle:RepairForm r
            JOIN r.repairTask t
            JOIN r.formCondition c
            JOIN t.user u
            WHERE u.id = :createrId AND c.id = :conditionId'
        )->setParameters(array('createrId'=>$createrId,'conditionId'=>$conditionId));
        try
        {
            return $query->getResult();
        }catch (\Doctrine\ORM\NoResultException $e){
            return null;
        }

    }


}
